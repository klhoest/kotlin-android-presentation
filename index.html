<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Kotlin & Android</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/solarized.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>

	<style>
		.bold {
			font-weight: bolder !important;
			color: #444;
		}
	</style>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>Kotlin introduction</h1>
			</section>
			<section>
				<section>
					<h2>Introduction</h2>
				</section>
				<section>
					<h2>
						Kotlin is
					</h2>
					<ul>
						<li>
							Statically typed programming language for modern multiplatform applications
						</li>
						<li>
							100% interoperable with Java™ and Android
						</li>
						<li>
							Object oriented
						</li>
						<li>
							Supports procedural programming
						</li>
						<li>
							Supports functional programming
						</li>
						<li>
							Created by JetBrains
						</li>
					</ul>
				</section>
				<section>
					<h2>
						Why Kotlin?
					</h2>
					<ul>
						<li>
							Its easier to use than Java™
						</li>
						<li>
							Modern language features even on legacy platforms (supports Java 6)
						</li>
						<li>
							Official Android platform language
						</li>
					</ul>
				</section>
				<section>
					<h2>Some Java issues addressed in Kotlin</h2>
					<ul>
						<li class="bold">Null references are controlled by the type system.</li>
						<li>No raw types</li>
						<li>Arrays in Kotlin are invariant</li>
						<li>Kotlin has proper function types, as opposed to Java's SAM-conversions</li>
						<li>Use-site variance without wildcards</li>
						<li class="bold">Kotlin does not have checked exceptions</li>
					</ul>
				</section>
				<section>
					<h2>What Java has that Kotlin does not</h2>
					<ul>
						<li class="bold">Checked exceptions</li>
						<li>
							Primitive types that are not classes
						</li>
						<li>
							Static members
						</li>
						<li class="bold">
							Non-private fields
						</li>
						<li>
							Wildcard-types
						</li>
					</ul>
				</section>
				<section>
					<h2>What Kotlin has that Java does not</h2>
					<table style="font-size: 25px;">
						<tr>
							<td>
								<ul>
									<li class="bold">
										Lambda expressions + Inline functions
									</li>
									<li class="bold">
										Extension functions
									</li>
									<li class="bold">
										Null-safety
									</li>
									<li class="bold">
										Smart casts
									</li>
									<li class="bold">
										String templates
									</li>
									<li class="bold">
										Properties
									</li>
									<li>
										Primary constructors
									</li>
									<li>
										First-class delegation
									</li>
								</ul>
							</td>
							<td>
								<ul>
									<li class="bold">
										Data classes
									</li>
									<li class="bold">
										Type inference for variable and property types
									</li>
									<li>
										Declaration-site variance & Type projections</li>
									<li>
										Range expressions
									</li>
									<li class="bold">
										Operator overloading
									</li>
									<li>
										Companion objects
									</li>
									<li>
										Separate interfaces for read-only and mutable collections
									</li>
									<li class="bold">
										Coroutines
									</li>
								</ul>
							</td>
						</tr>
					</table>
				</section>
			</section>
			<section>
				<section>
					<h2>Language syntax</h2>
					<a target="blank" href="https://kotlinlang.org/docs/reference/basic-syntax.html">© kotlinlang.org</a>
				</section>
				<section>
					<h2>
						Functons
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun sum(a: Int, b: Int): Int {
    return a + b
}
					</code></pre> 

					<pre><code class="hljs" data-trim contenteditable>
fun sum(a: Int, b: Int) = a + b
					</code></pre>

					<pre><code class="hljs" data-trim contenteditable>
fun main(args : &lt;string&gt;) {
   val scope = "world"
   println("Hello, $scope!")
}
					</code></pre>
				</section>
				<section>
					<h2>
						Defining local variable
					</h2>
					Assign-once (read-only) local variable:
					<pre><code class="hljs" data-trim contenteditable>
val a: Int = 1  // immediate assignment
val b = 2   // `Int` type is inferred
val c: Int  // Type required when no initializer is provided
c = 3       // deferred assignment
					</code></pre> Mutable variable:
					<pre><code class="hljs" data-trim contenteditable>
var x = 5 // `Int` type is inferred
x += 1
					</code></pre>
				</section>

				<section>
					<h2>
						Using string templates
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
var a = 1
val s1 = "a is $a" 
					</code></pre>
				</section>

				<section>
					<h2>
						Using conditional expressions
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun maxOf(a: Int, b: Int): Int {
    if (a > b) {
        return a
    } else {
        return b
    }
}
					</code></pre> if expression ( ? : ; in c# )
					<pre><code class="hljs" data-trim contenteditable>
fun maxOf(a: Int, b: Int) = if (a > b) a else b
					</code></pre>
				</section>

				<section>
					<h2>
						Nullable values
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun parseInt(str: String): Int? {
    // ...
}

fun printProduct(arg1: String, arg2: String) {
    val x = parseInt(arg1)
    val y = parseInt(arg2)
    // Using `x * y` yields error because they may hold nulls.
    if (x != null && y != null) {
    // x and y are automatically cast to non-nullable after null check
        println(x * y)
    }
}

files?.size

					</code></pre>
				</section>

				<section>
					<h2>
						Smart Cast
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun demo(x: Any) {
    if (x is String) {
        print(x.length) // x is automatically cast to String
    }
}
					</code></pre>
				</section>

				<section>
					<h2>
						For loops
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
for (item in collection) print(item)

for (item: Int in ints) {
    // ...
}

for (i in array.indices) {
    print(array[i])
}

for ((index, value) in array.withIndex()) {
    println("the element at $index is $value")
}
					</code></pre>
				</section>
				<section>
					<h2>
						While loops
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
while (x > 0) {
    x--
}

do {
    val y = retrieveData()
} while (y != null) // y is visible here!
					</code></pre>
				</section>

				<section>
					<h2>
						When Expression
					</h2>
					(Switch with pattern matching c# 7)
					<pre><code class="hljs" data-trim contenteditable>
fun describe(obj: Any): String =
when (obj) {
    1          -> "One"
    2,3,4      -> "More than one less than 5"
    "Hello"    -> "Greeting"
    is Long    -> "Long"
    !is String -> "Not a string"
    else       -> "Unknown"
}				</code></pre>
				</section>
				<section>
					<h2>
						Ranges
					</h2>
					<pre><code class="hljs" data-trim contenteditable>

// iterate through ranges
for (x in 1..5) { print(x) }

for (x in 1..10 step 2)  { print(x) }

for (x in 9 downTo 0 step 3)  { print(x) }

// Check if a number is in or out of range:
if (x in 1..y+1) {
    println("fits in range")
}

if (-1 !in 0..list.lastIndex) {
    println("-1 is out of range")
}
					</code></pre>
				</section>
				<section>
					<h2>
						Collections lambda expressions
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fruits
.filter { it.startsWith("a") }
.sortedBy { it }
.map { it.toUpperCase() }
.forEach { println(it) }
					</code></pre>
				</section>

				<section>
					<h2>
						Higher-Order Functions
					</h2>
					A higher-order function is a function that takes functions as parameters, or returns a function
					<pre><code class="hljs" data-trim contenteditable>
fun &lt;T&gt; lock(lock: Lock, body: () -> T): T {
    lock.lock()
    try {
        return body()
    }
    finally {
        lock.unlock()
    }
}
					</code></pre>

					<pre><code class="hljs" data-trim contenteditable>
fun toBeSynchronized() = sharedResource.operation()
val result = lock(lock, ::toBeSynchronized)

val result = lock(lock, { sharedResource.operation() })
					</code></pre>
				</section>

				<section>
					<h2>
						Lambdas
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
//no parameters lambda
defer({ notify() })

//lambda with parameters
max(strings, { a, b -> a.length < b.length })

//it: implicit name of a single parameter
strings
    .filter { it.length == 5 }
    .sortBy { it }
    .map { it.toUpperCase() }
					</code></pre>
				</section>

				<section>
					<h2>
						Closures
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
var sum = 0
ints.filter { it > 0 }.forEach {
    sum += it
}
print(sum)
					</code></pre>
				</section>

				<section>
					<h2>
						Exceptions
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
try {
    throw MyException("Hi There!")
}
catch (e: SomeException) {
    // handler
}
finally {
    // optional finally block
}
					</code></pre>
				</section>

				<section>
					<h2>
						Classes
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
class Invoice {
}
class Person(val firstName: String, var lastName: String) {
}
class Customer(name: String) {
    init {
        logger.info("Customer initialized with value ${name}")
    }
}
class Person (firstName: String)  {
    constructor(parent: Person) {
        // some code
    }
}
					</code></pre>
					<pre><code class="hljs" data-trim contenteditable>
val invoice = Invoice()
val customer = Customer("Joe Smith")
					</code></pre>
				</section>

				<section>
					<h2>
						Classes
					</h2>
					<ul>
						<li>No static methods</li>
						<li>Classes are marked final (sealed) by default unless they are marked as open</li>
					</ul>
					<pre><code class="hljs" data-trim contenteditable>
open class Animal {
}
					</code></pre>
				</section>

				<section>
					<h2>
						Class Members
					</h2>
					<ul>
						<li>Constructors and initializer blocks
						</li>
						<li>Functions
						</li>
						<li>Properties
						</li>
						<li>Nested and Inner Classes
						</li>
						<li>Object Declarations</li>
					</ul>
				</section>

				<section>
					<h2>
						Class functions
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
open class Foo {
    open fun foo(i: Int = 10) { ... }
}
					</code></pre>
				</section>

				<section>
					<h2>
						Properties
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
class Test {
    private val privateProperty: String = "Private"
    val immutableProperty: String = "Immutable"
    var mutableProperty: String = "Mutable public"

    var propertyWithCustomAccessors: String
        get() = this.toString()
        set(value) {
            // do something
        }

    var propertyWithInitialiserAndBackingField = 0 
        set(value) {
            if (value >= 0) field = value
        }
}
					</code></pre>
				</section>

				<section>
					<h2>
						Inheritance
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
open class A {
    open fun foo(i: Int = 10) { ... }
}

class B : A() {
    override fun foo(i: Int) { ... }  // no default value allowed
}
					</code></pre>
				</section>

				<section>
					<h2>
						Interfaces
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
interface MyInterface {
    fun bar()
    fun foo() {
      // optional body
    }
}

class Child : MyInterface {
    override fun bar() {
        // body
    }
}
					</code></pre>
				</section>

				<section>
					<h2>
						Data classes
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
data class User(val name: String, val age: Int)
					</code></pre> The compiler automatically creates:
					<ul>
						<li>equals()/hashCode()</li>
						<li>toString()</li>
						<li>componentN()</li>
						<li>copy()</li>
					</ul>
				</section>

				<section>
					<h2>
						Extensions methods
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun MutableList&lt;Int&gt;.swap(index1: Int, index2: Int) {
    val tmp = this[index1] // 'this' corresponds to the list
    this[index1] = this[index2]
    this[index2] = tmp
}

val l = mutableListOf(1, 2, 3)
l.swap(0, 2) // 'this' inside 'swap()' will hold the value of 'l'
					</code></pre>
				</section>

				<section>
					<h2>
						Extension Properties
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
val &lt;t&gt; List&lt;t&gt;.lastIndex: Int
    get() = size - 1
					</code></pre>
				</section>
			</section>
			<section>

				<section>
					<h2>
						Kotlin and Android
					</h2>
				</section>

				<section>
					<h2>
						Android Studio 3
					</h2>
					<img src="images/project-create.png" />
				</section>


				<section>
					<h2>
						Android code
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
class MainActivity : AppCompatActivity() {

    private val mOnNavigationItemSelectedListener = 
                BottomNavigationView.OnNavigationItemSelectedListener { item ->
        when (item.itemId) {
            R.id.navigation_home -> {
                message.setText(R.string.title_home)
                return@OnNavigationItemSelectedListener true
            }
            R.id.navigation_dashboard -> {
                message.setText(R.string.title_dashboard)
                return@OnNavigationItemSelectedListener true
            }
            R.id.navigation_notifications -> {
                message.setText(R.string.title_notifications)
                return@OnNavigationItemSelectedListener true
            }
        }
        false
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        navigation.setOnNavigationItemSelectedListener(mOnNavigationItemSelectedListener)

        this.floatingActionButton.setOnClickListener({
            message.setText("Button clicked")
        });
    }
}
					</code></pre>
				</section>


				<section>
					<h2>
						Anko
					</h2>
					Anko is a Kotlin library which makes Android application development faster and easier. It makes your code clean and easy
					to read, and lets you forget about rough edges of the Android SDK for Java.
				</section>

				<section>
					<h2>
						Anko Commons
					</h2>
					<ul>
						<li>Intents
						</li>
						<li>Dialogs and toasts
						</li>
						<li>Logging
						</li>
						<li>Resources and dimensions</li>
					</ul>
				</section>

				<section>
					<h2>
Anko Layouts
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
verticalLayout {
    val name = editText()
    button("Say Hello") {
        onClick { toast("Hello, ${name.text}!") }
    }
}
					</code></pre>
				</section>

				<section>
					<h2>
Anko SQLite
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun getUsers(db: ManagedSQLiteOpenHelper): List&lt;/User&gt; = db.use {
    db.select("Users")
            .whereSimple("family_name = ?", "John")
            .doExec()
            .parseList(UserParser)
}
					</code></pre>
				</section>

				<section>
					<h2>
Anko Coroutines 
					</h2>
					<pre><code class="hljs" data-trim contenteditable>
fun getData(): Data { ... }
fun showData(data: Data) { ... }

async(UI) {
    val data: Deferred&lt;Data&gt; = bg {
	// Runs in background
	getData()
    }

    // This code is executed on the UI thread
    showData(data.await())
}
					</code></pre>
				</section>
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			dependencies: [{
					src: 'plugin/markdown/marked.js'
				},
				{
					src: 'plugin/markdown/markdown.js'
				},
				{
					src: 'plugin/notes/notes.js',
					async: true
				},
				{
					src: 'plugin/highlight/highlight.js',
					async: true,
					callback: function () {
						hljs.initHighlightingOnLoad();
					}
				}
			]
		});
	</script>
</body>

</html>
